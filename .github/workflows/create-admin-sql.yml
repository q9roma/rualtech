name: Create Admin via SQL

on:
  workflow_dispatch:

jobs:
  create-admin-sql:
    runs-on: ubuntu-latest
    
    steps:
    - name: Create Admin User via SQL
      uses: appleboy/ssh-action@v1.0.3
      with:
        host: ${{ secrets.HOST }}
        username: ${{ secrets.USERNAME }}
        key: ${{ secrets.SSH_KEY }}
        script: |
          echo "üîê –°–æ–∑–¥–∞–µ–º –∞–¥–º–∏–Ω–∞ —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–π SQL –∑–∞–ø—Ä–æ—Å..."
          
          # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ö–µ—à –ø–∞—Ä–æ–ª—è (Laravel bcrypt)
          PASSWORD_HASH='$2y$12$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'  # admin123!
          
          # SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
          mysql -u alexsor -peY7rG4pX7r -D rualtech << 'EOF'
          
          -- –£–¥–∞–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –µ—Å—Ç—å
          DELETE FROM users WHERE email = 'corp-altekh07938@yandex.ru';
          
          -- –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
          INSERT INTO users (name, email, password, email_verified_at, created_at, updated_at) 
          VALUES (
            'alexsoroka',
            'corp-altekh07938@yandex.ru',
            '$2y$12$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi',
            NOW(),
            NOW(),
            NOW()
          );
          
          -- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
          SELECT id, name, email, created_at FROM users WHERE email = 'corp-altekh07938@yandex.ru';
          
          EOF
          
          echo ""
          echo "‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ SQL!"
          echo "üåê –ê–¥–º–∏–Ω–∫–∞: https://rualtech.ru/admin/login"
          echo "üìß Email: corp-altekh07938@yandex.ru"
          echo "üîê Password: admin123!"
          echo ""
          echo "üí° –•–µ—à –ø–∞—Ä–æ–ª—è: \$2y\$12\$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi"
